<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Medusa demo :: [$counter-value]</title>
    <link href="/stylesheet.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter&family=Merriweather&display=swap" rel="stylesheet">
</head>
<body>
<h1>ðŸ¦‘ Hello Medusa</h1>
<p>You are logged in as: [$principal]</p>
<p>[$query-param-q]</p>
<p>[$query-param-s]</p>
<p>My Counter: [$my-counter]</p>
<button id="my-counter-btn" m-click="increaseMyCounter('$uuid',$increase)">Increase my counter by [$increase]</button>
<p>Global Counter: [$counter-value]</p>

<button m-click="increaseCounter(1)">Increase counter</button>
[$if($counter-value > 0)]
    [$foreach $items-bought]
        [$if($counter-value > 5)]
            <p>Counter is above 5</p>
        [$else if($counter-value > 2)]
            <p>Counter is above 2</p>
        [$else]
            <p>Counter is below 2 and 5</p>
        [$end if]
    [$end for]
[$end if]
<p>Last bought : [$last_bought]</p>
<button m-click="buy('coffee')">Buy some coffee</button>
<button m-click="buy('tea', 'sugar', 3,'cookie')">Buy some tea and sugar</button>
<button m-click="buy('coffee, sugar but no cream','cookies (1 piece)', this.type)" type="button">Breaking stuff 1</button>
<button m-click='buy("coffee, sugar but no cream","cookies (2 pieces)")' type='button'>Breaking stuff 2</button>
<button m-click='buy("coffee, sugar but no cream","cookies (3 pieces)")' type="button">Breaking stuff 3</button>
<button m-click="clear()" m-disabled="$items-bought-size == 0">Clear</button>
[$if($items-bought-size == 0 )]
<p>Looks like you need a Coffee!</p>
[$else if($items-bought-size == 1)]
<p>Thanks for buying a Coffee</p>
[$else if($items-bought-size > 1 && $items-bought-size < 4)]
<p>You really like Coffee, don't you?</p>
[$else if($items-bought-size > 3 && 1 == 1)]
<p>You are a Coffee addict!</p>
[$end if]
[$foreach $items-bought]
    <p>Bought [$each]</p>
[$end for]

<p>Searched for: [$ search ]</p>
<p>[$search-result]</p>
<form>
    [$foreach $orders]
    <input m-onenter="search(this.value, 3,this.type,this.name)" type="text" name="term" autocomplete="off" />
    [$end for]
</form>

<h5>Orders</h5>
<button m-click='order()' type="button" m-hide="$three-items">Order [$blue-sky]</button>
[$foreach $orders]
<div><p>Product: [$each.product.name] Number: [$each.number] <button m-click="cancelOrder('[$each.id]')">Remove</button> </p></div>
[$end for]
<br/>
<a href="/page2">Detail page</a> <a href="/test/history">A brief history</a>

<br><br>

<button m-click="waitSeconds(4)" m-disable-on-click-until="$done-waiting" m-loading-style="full">This is a 4 seconds call with a full page loader</button>
<button m-click="waitSeconds(5)" m-disable-on-click-until="$done-waiting" m-loading-style="top">This is a 5 seconds call with a top page loader</button>

[$if($done-waiting)]
<p>Call completed!</p>
[$end if]
<br><br>

<button m-click="sampleWithSecurity()">This action also has security info along with it</button>

<div id="example-color-block" class="color-block" m-class-append="$counter-value > 2 ? 'wide' : 'square'"></div>

<footer>Counter is now at [$ counter-value], a value determined serverside</footer>
<script>
    function retryConnection() {
        console.log("I am retrying connection here, no overlaps");
    }
    retryConnection();
</script>
</body>
</html>