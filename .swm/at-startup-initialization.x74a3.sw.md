---
id: x74a3
title: At startup initialization
file_version: 1.1.2
app_version: 1.8.5
---

## Before each bean initialization

Before any requests are served, the app goes through its startup initialization.

This is a sequence of classes that get executed at in `RootDetector`'s`postProcessBeforeInitialization` .

They are used for anything that is build-dependent and are usually intended to increase efficiency at runtime. Code that requires Reflection calls or Thymeleaf parsing, for example, is slow - but most likely they are not dynamic beyond compile time. As such, we sacrifice startup time to have a quicker runtime.

Examples of this are determining which routes exist (which means going over all controllers and creating a routing map) or which fragments could be loaded.

It all starts with the `RootDetector`. This is the class that kicks off any initialization. That's all it does. Effectively this kicks off before each bean is initialized.

<br/>


<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ medusa-ui/src/main/java/io/getmedusa/medusa/core/boot/RootDetector.java
```java
23         public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
24             RouteDetection.INSTANCE.consider(bean);
25             RefDetection.INSTANCE.consider(bean);
26             MethodDetection.INSTANCE.consider(bean);
27             ValidationDetection.INSTANCE.consider(bean);
28             return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName);
29         }
```

<br/>

In addition to routes, all the HTML files are also scanned for Refs and Fragments, so it is known up-front which fragments are relevant, saving time during rendering.

We also scan all methods in controller classes for a Session object. If a Session object is present, we remember if the object is at the start or end of the method, so we can autowire it in ourselves.

## After all bean initialization

Just once during the startup process, only once: after all beans have been initialized. We trigger any logic that needs to happen at this point.

<br/>

`postProcessAfterInitialization`<swm-token data-swm-token=":medusa-ui/src/main/java/io/getmedusa/medusa/core/boot/RootDetector.java:32:5:5:`    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {`"/> would be called after each bean's initialization. By filtering on the `MedusaAutoConfiguration`<swm-token data-swm-token=":medusa-ui/src/main/java/io/getmedusa/medusa/core/config/MedusaAutoConfiguration.java:18:4:4:`public class MedusaAutoConfiguration {`"/> bean, we ensure it only occurs once. The auto-config bean also ends up being the one that gets called _last_.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ medusa-ui/src/main/java/io/getmedusa/medusa/core/boot/RootDetector.java
```java
32         public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
33             if(beanName.equalsIgnoreCase(MedusaAutoConfiguration.class.getName())){ //execute post init, as last
```

<br/>

One example of this is the trigger for connecting with Hydra. For this to work, all routes need to be known, so we can only run this as the last action. The connection with Hydra registers the Medusa app.

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBbWVkdXNhJTNBJTNBbWVkdXNhLXVp/docs/x74a3).
